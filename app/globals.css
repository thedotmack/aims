@import "tailwindcss";

/* Prevent horizontal overflow on mobile */
html, body {
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
}

/* Focus indicators for accessibility (WCAG AA) */
:focus-visible {
  outline: 2px solid var(--aim-yellow, #FFCC00);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Skip to content link for keyboard users */
.skip-to-content {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  padding: 8px 16px;
  background: var(--aim-yellow, #FFCC00);
  color: black;
  font-weight: bold;
  font-size: 14px;
  border-radius: 0 0 8px 8px;
  transition: top 0.2s;
}
.skip-to-content:focus {
  top: 0;
}

/* ===================================================================
   AIM Design System — Color Palette Reference
   ===================================================================
   Primary:   AIM Blue (#003399), AIM Light Blue (#0066CC)
   Accent:    AIM Yellow (#FFCC00), AIM Gold (#FFC107)
   Brand:     AIM Purple (#6B5B95), AIM Magenta (#8B4789)
   Status:    Online Green (#4CAF50), Away Yellow (#FFD54F), Offline Gray (#888)
   Actions:   Success Green, Warning Gold, Danger Red
   
   ALL colors must go through CSS custom properties — no random hex values.
   =================================================================== */
:root {
  /* Primary Colors */
  --aim-blue: #003399;
  --aim-blue-light: #0066CC;
  --aim-yellow: #FFCC00;
  --aim-purple: #6B5B95;
  --aim-magenta: #8B4789;

  /* Status Colors */
  --aim-online: #4CAF50;
  --aim-online-dark: #2E7D32;
  --aim-away: #FFD54F;
  --aim-away-dark: #FFA000;
  --aim-offline: #999999;
  --aim-offline-dark: #666666;

  /* Action Button Colors */
  --aim-green-light: #4CAF50;
  --aim-green-dark: #2E7D32;
  --aim-gold-light: #FFD54F;
  --aim-gold-dark: #FFC107;
  --aim-red-light: #EF5350;
  --aim-red-dark: #C62828;

  /* Window Chrome */
  --aim-window-title-start: #7799CC;
  --aim-window-title-end: #5577AA;
  --aim-window-border: #003366;
  --aim-input-border: #99CCFF;

  /* Backgrounds */
  --aim-cream: #FFF8E7;
  --aim-blue-tint: #E8F4FC;
  --aim-gray: #C0C0C0;
  --aim-code-bg: #D6E9F8;
  --aim-surface: #ffffff;
  --aim-surface-muted: #f8fafc;

  /* Page + panels */
  --aim-page-bg-start: #6B5B95;
  --aim-page-bg-mid: #8B4789;
  --aim-page-bg-end: #4a3070;
  --aim-panel-top: #f5f5f5;
  --aim-panel-bottom: #e0e0e0;
  --aim-chrome-top: #e0e0e0;
  --aim-chrome-bottom: #c0c0c0;
  --aim-border-strong: #999999;
  --aim-border-soft: #d1d5db;
  --aim-link: #003399;
  --aim-tab-inactive-top: #8B7DB8;
  --aim-tab-inactive-bottom: #6B5B95;
  --aim-tab-inactive-text: rgba(255, 255, 255, 0.7);
  --aim-tab-active-border: #4169E1;

  /* Feed details */
  --aim-tag-bg: #f3f4f6;
  --aim-tag-text: #6b7280;
  --aim-tag-border: #e5e7eb;
  --aim-feed-footer-bg: #fafafa;
  --aim-feed-footer-border: #f0f0f0;
  --aim-feed-footer-text: #999999;

  /* Text */
  --aim-text: #333333;
  --aim-text-light: #666666;
}

.dark {
  --aim-window-title-start: #334155;
  --aim-window-title-end: #1f2937;
  --aim-window-border: #334155;
  --aim-input-border: #475569;
  --aim-cream: #111827;
  --aim-blue-tint: #111827;
  --aim-gray: #1f2937;
  --aim-code-bg: #0f172a;
  --aim-surface: #111827;
  --aim-surface-muted: #0b1220;

  --aim-page-bg-start: #0f172a;
  --aim-page-bg-mid: #1f1b3a;
  --aim-page-bg-end: #09090f;
  --aim-panel-top: #1f2937;
  --aim-panel-bottom: #111827;
  --aim-chrome-top: #374151;
  --aim-chrome-bottom: #1f2937;
  --aim-border-strong: #475569;
  --aim-border-soft: #334155;
  --aim-link: #93c5fd;
  --aim-tab-inactive-top: #334155;
  --aim-tab-inactive-bottom: #1f2937;
  --aim-tab-inactive-text: #94a3b8;
  --aim-tab-active-border: #60a5fa;

  --aim-tag-bg: #1f2937;
  --aim-tag-text: #cbd5e1;
  --aim-tag-border: #334155;
  --aim-feed-footer-bg: #0f172a;
  --aim-feed-footer-border: #1f2937;
  --aim-feed-footer-text: #94a3b8;

  --aim-text: #e2e8f0;
  --aim-text-light: #94a3b8;
}

/* Typography */
body {
  font-family: var(--font-body), 'Inter', system-ui, sans-serif;
  color: var(--aim-text);
  background-color: var(--aim-page-bg-start);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.aim-page-bg {
  background: linear-gradient(to bottom, var(--aim-page-bg-start) 0%, var(--aim-page-bg-mid) 50%, var(--aim-page-bg-end) 100%);
  transition: background 0.25s ease;
  position: relative;
}

/* Subtle noise texture overlay for depth */
.aim-page-bg::before {
  content: '';
  position: fixed;
  inset: 0;
  opacity: 0.035;
  pointer-events: none;
  z-index: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 256px 256px;
}

h1, h2, h3, .aim-display {
  font-family: var(--font-display), 'Righteous', Impact, sans-serif;
  line-height: 1.2;
}

code, pre, .font-mono {
  font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', 'Lucida Console', 'Courier New', monospace;
}

pre {
  font-size: 0.8125rem;
  line-height: 1.5;
  tab-size: 2;
}

p {
  line-height: 1.6;
}

/* AIM Header */
.aim-header {
  background: var(--aim-blue);
  border-bottom: 3px solid #001a66;
}

/* Hero Banner */
.aim-hero-gradient {
  background: 
    radial-gradient(ellipse 80% 50% at 50% 40%, rgba(139, 71, 137, 0.5) 0%, transparent 70%),
    linear-gradient(135deg, var(--aim-purple) 0%, var(--aim-magenta) 40%, #4a3070 100%);
  position: relative;
}

/* Ensure text on purple gradient backgrounds meets WCAG AA */
.aim-hero-gradient p,
.aim-hero-gradient span {
  text-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

/* Window Chrome */
.aim-window {
  border: 2px solid var(--aim-window-border);
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.aim-window-titlebar {
  background: linear-gradient(180deg, var(--aim-window-title-start) 0%, var(--aim-window-title-end) 100%);
  padding: 4px 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@media (min-width: 768px) {
  .aim-window-titlebar {
    padding: 6px 8px;
  }
}

.aim-window-content {
  background: var(--aim-surface);
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.1);
}

/* Window chrome buttons — classic AIM minimize/maximize/close */
.aim-window-btn {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  color: #333;
  background: linear-gradient(180deg, #e8e8e8 0%, #c0c0c0 100%);
  border: 1px solid #888;
  border-top-color: #fff;
  border-left-color: #fff;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.3);
  cursor: default;
  transition: filter 0.1s ease;
}

.aim-window-btn:hover {
  filter: brightness(1.1);
}

.aim-window-btn:active {
  background: linear-gradient(180deg, #b0b0b0 0%, #c0c0c0 100%);
  border-top-color: #888;
  border-left-color: #888;
  border-bottom-color: #fff;
  border-right-color: #fff;
}

.aim-window-btn-close {
  background: linear-gradient(180deg, #e88 0%, #c44 100%);
  border-color: #922;
  border-top-color: #faa;
  border-left-color: #faa;
  color: white;
}

.aim-window-btn-close:hover {
  filter: brightness(1.15);
}

/* Retro selection color */
::selection {
  background: var(--aim-blue);
  color: white;
}

::-moz-selection {
  background: var(--aim-blue);
  color: white;
}

/* Action Buttons */
.aim-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 1rem;
  border: 3px solid;
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.4),
    inset 0 -1px 0 rgba(0,0,0,0.2),
    0 4px 8px rgba(0,0,0,0.3);
  transition: all 0.15s ease;
}

.aim-btn:hover {
  transform: translateY(-2px) scale(1.02);
  filter: brightness(1.05);
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.4),
    inset 0 -1px 0 rgba(0,0,0,0.2),
    0 6px 16px rgba(0,0,0,0.35);
}

.aim-btn:active {
  transform: translateY(1px);
  box-shadow: 
    inset 0 -1px 0 rgba(255,255,255,0.4),
    inset 0 1px 0 rgba(0,0,0,0.2),
    0 2px 4px rgba(0,0,0,0.3);
}

.aim-btn-green {
  background: linear-gradient(180deg, var(--aim-green-light) 0%, var(--aim-green-dark) 100%);
  border-color: #1B5E20;
  color: white;
}

.aim-btn-yellow {
  background: linear-gradient(180deg, var(--aim-gold-light) 0%, var(--aim-gold-dark) 100%);
  border-color: #FF8F00;
  color: #333;
}

.aim-btn-red {
  background: linear-gradient(180deg, var(--aim-red-light) 0%, var(--aim-red-dark) 100%);
  border-color: #B71C1C;
  color: white;
}

/* Tab Bar — desktop only (mobile tab bar uses Tailwind classes in AimTabBar) */
.aim-tab-bar {
  background: var(--aim-gray);
  border-top: 2px solid white;
  border-bottom: 2px solid #808080;
}

.aim-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  font-weight: bold;
  font-size: 0.875rem;
  text-transform: uppercase;
  color: #333;
  border-right: 1px solid #808080;
  cursor: pointer;
  transition: background 0.15s ease;
}

.aim-tab:last-child {
  border-right: none;
}

.aim-tab:hover {
  background: linear-gradient(180deg, #E0E0E0 0%, #C0C0C0 100%);
}

.aim-tab.active {
  background: linear-gradient(180deg, #E8E8E8 0%, #D0D0D0 100%);
  border-top: 2px solid #003399;
  color: #003399;
}

/* Cards */
.aim-card {
  border-radius: 8px;
  padding: 16px;
  border: 1px solid #ddd;
}

.aim-card-cream {
  background: var(--aim-cream);
}

.aim-card-blue {
  background: var(--aim-blue-tint);
}

/* Code Blocks */
.aim-code {
  background: var(--aim-code-bg);
  border: 1px solid var(--aim-input-border);
  border-radius: 4px;
  padding: 8px 12px;
  font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', 'Lucida Console', 'Courier New', monospace;
  font-size: 0.8125rem;
  line-height: 1.5;
}

/* Input Fields */
.aim-input {
  border: 2px solid var(--aim-input-border);
  padding: 8px 12px;
  font-size: 0.875rem;
  background: var(--aim-surface);
  color: var(--aim-text);
}

.aim-input:focus {
  outline: none;
  border-color: var(--aim-blue-light);
  box-shadow: 0 0 0 2px rgba(0,102,204,0.2);
}

/* Messages */
.aim-message {
  padding: 4px 0;
  font-size: 0.875rem;
  line-height: 1.4;
}

.aim-message-username {
  font-weight: bold;
  color: var(--aim-blue);
}

/* Status Toast */
.aim-status {
  background: #4169E1;
  color: white;
  padding: 8px 16px;
  border-radius: 9999px;
  font-weight: bold;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

/* Scrollbar (Windows style) */
.aim-scrollbar::-webkit-scrollbar {
  width: 16px;
}

.aim-scrollbar::-webkit-scrollbar-track {
  background: #f0f0f0;
  border: 1px solid #ccc;
}

.aim-scrollbar::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #c0c0c0 0%, #a0a0a0 100%);
  border: 1px solid #808080;
}

.aim-scrollbar::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #b0b0b0 0%, #909090 100%);
}

/* Mobile Responsive */
@media (min-width: 640px) {
  .aim-btn {
    gap: 12px;
    padding: 16px 24px;
    font-size: 1.25rem;
  }
}

@media (max-width: 639px) {
  .aim-tab {
    padding: 10px 8px;
    font-size: 0.75rem;
    gap: 4px;
    flex-direction: column;
  }

  .aim-window-titlebar {
    padding: 4px 6px;
  }

  /* Prevent horizontal overflow on mobile */
  pre {
    max-width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Full-width cards on mobile */
  .aim-card {
    padding: 12px;
  }
}

/* Feed item animations */
@keyframes feedSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-8px);
    max-height: 0;
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    max-height: 500px;
  }
}

@keyframes feedGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(26,115,232,0.1); }
  50% { box-shadow: 0 0 12px rgba(26,115,232,0.25); }
}

@keyframes feedPulse {
  0% { border-left-color: transparent; }
  50% { border-left-color: #FFCC00; }
  100% { border-left-color: transparent; }
}

.feed-new-item {
  border-left: 3px solid #FFCC00;
  animation: feedSlideIn 0.4s ease-out, feedPulse 1.5s ease-in-out 0.4s 2;
}

@keyframes dmSlideIn {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Page transition fade-in */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

main > * {
  animation: fadeIn 0.3s ease-out;
}

/* Ensure minimum tap targets on mobile */
@media (max-width: 639px) {
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exception for inline text links */
  p a, span a, div.text-xs a {
    min-height: unset;
    min-width: unset;
  }
}

/* Hover effects for interactive elements */
.aim-card:hover {
  transform: translateY(-1px);
}

.aim-card {
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

/* === CYCLE 5: Micro-interactions & Delight === */

/* Bot card hover: scale + glow (upgraded cycle 31) */
.bot-card-hover {
  transition: transform 0.2s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.2s ease, border-color 0.2s ease;
}
.bot-card-hover:hover {
  transform: translateY(-3px) scale(1.005);
  box-shadow: 0 8px 24px rgba(65, 105, 225, 0.15), 0 0 0 1px rgba(65, 105, 225, 0.1);
}

/* Buddy list entry hover glow */
.buddy-entry {
  transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
}
.buddy-entry:hover {
  background: #dce8ff !important;
  transform: translateX(2px);
  box-shadow: inset 3px 0 0 #4169E1;
}

/* Tab switch content transition */
.tab-content-enter {
  animation: tabFadeIn 0.25s ease-out;
}
@keyframes tabFadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Button press feedback */
.aim-btn:active, .btn-press:active {
  transform: scale(0.96) !important;
  transition: transform 0.08s ease;
}

/* Sound toggle click feedback */
.sound-toggle {
  transition: transform 0.15s ease;
}
.sound-toggle:active {
  transform: scale(0.85) !important;
}

/* Feed item organic entrance */
@keyframes feedFadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
.feed-item-enter {
  animation: feedFadeUp 0.4s cubic-bezier(0.22, 1, 0.36, 1);
}

.feed-item-active {
  outline: 2px solid #003399;
  outline-offset: 1px;
  border-radius: 8px;
}

/* Filter pill transitions */
.filter-pill {
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
}
.filter-pill:active {
  transform: scale(0.95);
}

/* Sort button transitions */
.sort-btn {
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
}
.sort-btn:active {
  transform: scale(0.9);
}

/* Link hover transitions */
a {
  transition: color 0.15s ease, opacity 0.15s ease;
}

/* Group header hover */
.group-header {
  transition: background 0.15s ease;
}
.group-header:hover {
  filter: brightness(1.05);
}

/* === CYCLE 5: Dark Mode Polish === */

/* AIM windows pop against dark purple background */
.aim-window {
  box-shadow: 0 8px 32px rgba(0,0,0,0.4), 0 2px 8px rgba(0,0,0,0.2);
}

/* Cards with white/cream backgrounds get depth */
.aim-card-cream, .aim-card-blue {
  box-shadow: 0 4px 16px rgba(0,0,0,0.2), 0 1px 4px rgba(0,0,0,0.1);
}

/* Ensure light text on dark bg has good contrast */
.text-white\/70 {
  color: rgba(255, 255, 255, 0.75);
}
.text-white\/40 {
  color: rgba(255, 255, 255, 0.5);
}

/* Footer links more visible */
footer a {
  color: rgba(255, 255, 255, 0.55);
}
footer a:hover {
  color: rgba(255, 255, 255, 0.85);
}

/* Navigation links on dark backgrounds */
.aim-tab-bar {
  box-shadow: 0 -2px 8px rgba(0,0,0,0.15);
}

/* Token banner glow against dark bg */
.token-banner-glow {
  box-shadow: 0 4px 24px rgba(107, 91, 149, 0.3), 0 0 0 1px rgba(128, 90, 213, 0.2);
}

/* Header contrast boost */
.aim-header {
  box-shadow: 0 2px 12px rgba(0,0,0,0.3);
}

/* Ensure stat cards are readable */
.aim-card .text-3xl {
  text-shadow: none;
}

/* Theme-aware dark mode overrides */
.dark .aim-header {
  background: #0f172a;
  border-bottom-color: #1e293b;
}

.dark .aim-hero-gradient {
  background: linear-gradient(135deg, #1f2937 0%, #312e81 50%, #1e1b4b 100%);
}

.dark .aim-tab-bar {
  background: #111827;
  border-top: 1px solid #334155;
  border-bottom: 1px solid #0f172a;
}

.dark .aim-tab {
  color: #cbd5e1;
  border-right-color: #334155;
}

.dark .aim-tab:hover {
  background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
}

.dark .aim-tab.active {
  background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
  border-top-color: #60a5fa;
  color: #93c5fd;
}

.dark .aim-window {
  border-color: #334155;
}

.dark .aim-window-titlebar {
  background: linear-gradient(180deg, #334155 0%, #1f2937 100%);
}

.dark .aim-window-content {
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.45);
}

.dark .aim-window-btn {
  background: linear-gradient(180deg, #475569 0%, #334155 100%);
  border-color: #1f2937;
  border-top-color: #64748b;
  border-left-color: #64748b;
  color: #e2e8f0;
}

.dark .aim-window-btn-close {
  background: linear-gradient(180deg, #ef4444 0%, #b91c1c 100%);
  border-color: #7f1d1d;
  border-top-color: #fca5a5;
  border-left-color: #fca5a5;
  color: white;
}

.dark ::selection {
  background: #3b82f6;
  color: white;
}

.dark .aim-card,
.dark .aim-card-cream,
.dark .aim-card-blue {
  border-color: var(--aim-border-soft);
}

.dark .aim-card-cream {
  background: #111827;
}

.dark .aim-card-blue {
  background: #0f172a;
}

.dark .group-header {
  color: #e5e7eb !important;
}

.dark .buddy-entry:hover {
  background: #1f2937 !important;
  box-shadow: inset 3px 0 0 #60a5fa;
}

.dark .reaction-picker {
  background: #0f172a;
  border-color: #334155;
  box-shadow: 0 8px 30px rgba(0,0,0,0.45);
}

.dark .bg-white { background-color: var(--aim-surface) !important; }
.dark .bg-gray-50 { background-color: #0f172a !important; }
.dark .bg-gray-100 { background-color: #1f2937 !important; }
.dark .bg-gray-200 { background-color: #334155 !important; }
.dark .bg-gray-300 { background-color: #475569 !important; }

.dark .border-gray-50 { border-color: #1f2937 !important; }
.dark .border-gray-100 { border-color: #1f2937 !important; }
.dark .border-gray-200 { border-color: #334155 !important; }
.dark .border-gray-300 { border-color: #475569 !important; }

.dark .text-gray-900 { color: #f8fafc !important; }
.dark .text-gray-800 { color: #e2e8f0 !important; }
.dark .text-gray-700 { color: #cbd5e1 !important; }
.dark .text-gray-600 { color: #94a3b8 !important; }
.dark .text-gray-500 { color: #94a3b8 !important; }
.dark .text-gray-400 { color: #64748b !important; }
.dark .text-gray-300 { color: #94a3b8 !important; }

.dark .hover\:bg-gray-50:hover { background-color: #1f2937 !important; }
.dark .hover\:bg-gray-100:hover { background-color: #334155 !important; }
.dark .hover\:bg-gray-200:hover { background-color: #475569 !important; }
.dark .hover\:text-red-500:hover { color: #f87171 !important; }

.dark .hover\:bg-gray-300:hover { background-color: #475569 !important; }

.dark [class*="text-[#003399]"] { color: var(--aim-link) !important; }
.dark [class*="bg-[#003399]"] { background-color: #1d4ed8 !important; }
.dark [class*="focus:border-[#003399]"]:focus { border-color: #60a5fa !important; }
.dark [class*="bg-[#dce8ff]"] { background-color: #1e293b !important; }
.dark [class*="hover:bg-[#dce8ff]"]:hover { background-color: #1e293b !important; }
.dark [class*="hover:bg-[#b8d4ff]"]:hover { background-color: #334155 !important; }
.dark [class*="bg-[#FFF8E7]"] { background-color: #1c1917 !important; }
.dark [class*="bg-[#E8F4FC]"] { background-color: #0f172a !important; }
.dark [class*="hover:border-[#4169E1]"]:hover { border-color: #60a5fa !important; }
.dark [class*="border-[#003399]"] { border-color: #60a5fa !important; }
.dark [class*="hover:bg-[#002266]"]:hover { background-color: #1e40af !important; }
.dark [class*="bg-[#0055cc]"] { background-color: #2563eb !important; }

/* Dark mode: colored utility backgrounds */
.dark .bg-blue-50 { background-color: #0c1a2e !important; }
.dark .bg-blue-100 { background-color: #172554 !important; }
.dark .bg-blue-200 { background-color: #1e3a5f !important; }
.dark .bg-purple-50 { background-color: #1a0f2e !important; }
.dark .bg-purple-100 { background-color: #2e1065 !important; }
.dark .bg-purple-200 { background-color: #3b0f80 !important; }
.dark .bg-green-50 { background-color: #0a1f1a !important; }
.dark .bg-green-100 { background-color: #052e16 !important; }
.dark .bg-green-200 { background-color: #14532d !important; }
.dark .bg-red-50 { background-color: #1f0a0a !important; }
.dark .bg-red-100 { background-color: #450a0a !important; }
.dark .bg-yellow-50 { background-color: #1a1508 !important; }
.dark .bg-yellow-100 { background-color: #422006 !important; }
.dark .bg-indigo-50 { background-color: #0f0e2e !important; }
.dark .bg-indigo-100 { background-color: #1e1b4b !important; }

/* Dark mode: colored borders */
.dark .border-blue-100 { border-color: #1e3a5f !important; }
.dark .border-blue-200 { border-color: #1d4ed8 !important; }
.dark .border-blue-300 { border-color: #3b82f6 !important; }
.dark .border-purple-100 { border-color: #2e1065 !important; }
.dark .border-purple-200 { border-color: #7c3aed !important; }
.dark .border-purple-300 { border-color: #8b5cf6 !important; }
.dark .border-green-200 { border-color: #166534 !important; }
.dark .border-green-300 { border-color: #22c55e !important; }
.dark .border-red-200 { border-color: #991b1b !important; }
.dark .border-red-300 { border-color: #ef4444 !important; }
.dark .border-yellow-200 { border-color: #92400e !important; }
.dark .border-yellow-300 { border-color: #eab308 !important; }
.dark .border-indigo-200 { border-color: #3730a3 !important; }

/* Dark mode: colored text adjustments */
.dark .text-blue-600 { color: #60a5fa !important; }
.dark .text-blue-700 { color: #93c5fd !important; }
.dark .text-blue-800 { color: #93c5fd !important; }
.dark .text-purple-500 { color: #a78bfa !important; }
.dark .text-purple-600 { color: #a78bfa !important; }
.dark .text-purple-700 { color: #c4b5fd !important; }
.dark .text-green-600 { color: #4ade80 !important; }
.dark .text-green-700 { color: #86efac !important; }
.dark .text-green-800 { color: #86efac !important; }
.dark .text-red-500 { color: #f87171 !important; }
.dark .text-red-600 { color: #fca5a5 !important; }
.dark .text-red-700 { color: #fca5a5 !important; }
.dark .text-yellow-600 { color: #fbbf24 !important; }
.dark .text-yellow-700 { color: #fde68a !important; }
.dark .text-indigo-600 { color: #818cf8 !important; }
.dark .text-indigo-700 { color: #a5b4fc !important; }

/* Dark mode: hover colored backgrounds */
.dark .hover\:bg-blue-50:hover { background-color: #172554 !important; }
.dark .hover\:bg-blue-100:hover { background-color: #1e3a5f !important; }
.dark .hover\:bg-green-100:hover { background-color: #14532d !important; }
.dark .hover\:bg-yellow-100:hover { background-color: #422006 !important; }
.dark .hover\:bg-purple-100:hover { background-color: #3b0f80 !important; }
.dark .hover\:bg-yellow-300:hover { background-color: #92400e !important; }

/* Dark mode: text-black on colored backgrounds */
.dark .text-black { color: #f8fafc !important; }

/* Dark mode: misc overrides */
.dark .bg-white\/80 { background-color: rgba(17, 24, 39, 0.8) !important; }
.dark .bg-white\/90 { background-color: rgba(17, 24, 39, 0.9) !important; }
.dark .bg-white\/95 { background-color: rgba(17, 24, 39, 0.95) !important; }
.dark .divide-gray-200 > :not(:last-child) { border-color: #334155 !important; }
.dark .divide-gray-100 > :not(:last-child) { border-color: #1f2937 !important; }
.dark .ring-gray-200 { --tw-ring-color: #334155 !important; }
.dark .shadow-md { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.4), 0 2px 4px -2px rgba(0,0,0,0.3) !important; }

/* Dark mode: scrollbar */
.dark .aim-scrollbar::-webkit-scrollbar-track { background: #1f2937; border-color: #334155; }
.dark .aim-scrollbar::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #475569 0%, #334155 100%); border-color: #475569; }

/* Dark mode: placeholder text */
.dark input::placeholder, .dark textarea::placeholder { color: #64748b !important; }

/* Dark mode: focus rings */
.dark .focus\:ring-blue-500:focus { --tw-ring-color: #3b82f6 !important; }
.dark .focus\:border-blue-500:focus { border-color: #3b82f6 !important; }

/* Dark mode: slate overrides */
.dark .bg-slate-50 { background-color: #0f172a !important; }
.dark .bg-slate-100 { background-color: #1e293b !important; }
.dark .border-slate-200 { border-color: #334155 !important; }
.dark .text-slate-600 { color: #94a3b8 !important; }
.dark .text-slate-700 { color: #cbd5e1 !important; }
.dark .from-slate-50 { --tw-gradient-from: #0f172a !important; }
.dark .to-blue-50 { --tw-gradient-to: #0c1a2e !important; }

/* Dark mode: gray-900/800 areas (already dark, keep but soften) */
.dark .bg-gray-900 { background-color: #0f172a !important; }
.dark .bg-gray-800 { background-color: #1e293b !important; }
.dark .bg-gray-700 { background-color: #334155 !important; }
.dark .bg-gray-600 { background-color: #475569 !important; }
.dark .bg-gray-500 { background-color: #64748b !important; }
.dark .bg-gray-400 { background-color: #94a3b8 !important; }

/* Dark mode: near-black text */
.dark [class*="text-[#1a1a1a]"] { color: #e2e8f0 !important; }
.dark [class*="text-[#333"]  { color: #e2e8f0 !important; }

/* Dark mode: amber/orange text for DemoFeed etc */
.dark .text-amber-700 { color: #fbbf24 !important; }
.dark .text-amber-600\/70 { color: rgba(251, 191, 36, 0.7) !important; }
.dark .bg-amber-400 { background-color: #f59e0b !important; }

/* Dark mode: amber text */
.dark .text-amber-800 { color: #fbbf24 !important; }

/* Dark mode: teal utilities */
.dark .bg-teal-50 { background-color: #0a1f1f !important; }
.dark .bg-teal-100 { background-color: #042f2e !important; }
.dark .border-teal-100 { border-color: #134e4a !important; }
.dark .border-teal-300 { border-color: #14b8a6 !important; }
.dark .text-teal-600 { color: #2dd4bf !important; }

/* Dark mode: orange utilities */
.dark .bg-orange-50 { background-color: #1a1008 !important; }
.dark .bg-orange-100 { background-color: #431407 !important; }
.dark .border-orange-200 { border-color: #9a3412 !important; }
.dark .text-orange-600 { color: #fb923c !important; }
.dark .hover\:bg-orange-100:hover { background-color: #431407 !important; }

/* Dark mode: amber utilities */
.dark .bg-amber-50 { background-color: #1a1508 !important; }
.dark .border-amber-100 { border-color: #92400e !important; }
.dark .border-amber-200 { border-color: #92400e !important; }

/* Dark mode: gradient overrides for from-X to-Y combos */
.dark .from-green-50 { --tw-gradient-from: #0a1f1a !important; }
.dark .from-purple-50 { --tw-gradient-from: #1a0f2e !important; }
.dark .via-blue-50 { --tw-gradient-via: #0c1a2e !important; }
.dark .to-purple-50 { --tw-gradient-to: #1a0f2e !important; }
.dark .from-green-400 { --tw-gradient-from: #4ade80 !important; }
.dark .via-teal-500 { --tw-gradient-via: #14b8a6 !important; }

/* Dark mode: mobile More sheet */
.dark .safe-area-bottom {
  background: #111827 !important;
  border-top-color: #334155 !important;
}

/* Dark mode: selection */
.dark ::selection { background: #334155; color: #f1f5f9; }

/* === Registration Confetti === */
.confetti-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 0;
}

.confetti-piece {
  position: absolute;
  top: -10px;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  opacity: 0.8;
  animation: confettiFall linear forwards;
}

@keyframes confettiFall {
  0% {
    transform: translateY(-10px) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(600px) rotate(720deg);
    opacity: 0;
  }
}

/* Slide-down animation for new broadcast pill */
@keyframes slide-down {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.animate-slide-down {
  animation: slide-down 0.3s ease-out;
}

/* Feed item enter animation */
@keyframes feed-item-enter {
  from {
    opacity: 0;
    transform: translateY(-8px);
    max-height: 0;
  }
  to {
    opacity: 1;
    transform: translateY(0);
    max-height: 500px;
  }
}
.feed-item-new {
  animation: feed-item-enter 0.4s ease-out;
}

/* === CYCLE 30: Mobile-Native Experience === */

/* More sheet slide-up */
@keyframes sheetSlideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

/* Safe area for bottom nav (iPhone notch) */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Mobile bottom nav spacing */
@media (max-width: 639px) {
  main {
    padding-bottom: 72px !important;
  }
}

/* Pull-to-refresh styles */
.ptr-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.ptr-hint {
  text-align: center;
  padding: 8px;
  font-size: 12px;
  color: #999;
  transition: opacity 0.2s;
}

.ptr-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid #ddd;
  border-top-color: #003399;
  border-radius: 50%;
  animation: ptrSpin 0.6s linear infinite;
}

@keyframes ptrSpin {
  to { transform: rotate(360deg); }
}

/* Swipeable bot card */
.swipe-card {
  touch-action: pan-y;
  transition: transform 0.3s ease;
  position: relative;
  overflow: hidden;
}

.swipe-card-action {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
  color: white;
}

.swipe-card-action-left {
  right: 0;
  background: #7c3aed;
  border-radius: 0 8px 8px 0;
}

.swipe-card-action-right {
  left: 0;
  background: #003399;
  border-radius: 8px 0 0 8px;
}

/* Swipe hint animation */
@keyframes swipeHint {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-20px); }
  50% { transform: translateX(0); }
  75% { transform: translateX(20px); }
}

.swipe-hint-animate {
  animation: swipeHint 1.5s ease-in-out;
}

/* Mobile accordion */
@media (max-width: 639px) {
  .mobile-accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .mobile-accordion-content {
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
}

/* Improve mobile link/button spacing in dense areas */
@media (max-width: 639px) {
  .flex-wrap a, .flex-wrap button {
    margin-bottom: 4px;
  }
}

/* Mobile reaction touch targets */
@media (max-width: 639px) {
  .mobile-reaction-btn {
    min-width: 44px !important;
    min-height: 44px !important;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    font-size: 18px !important;
  }
}

/* Reaction picker popup */
.reaction-picker {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: white;
  border-radius: 24px;
  padding: 6px 8px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  border: 1px solid #e5e7eb;
  display: flex;
  gap: 4px;
  z-index: 50;
  animation: pickerPop 0.2s ease-out;
}

@keyframes pickerPop {
  from { opacity: 0; transform: translateX(-50%) scale(0.8) translateY(8px); }
  to { opacity: 1; transform: translateX(-50%) scale(1) translateY(0); }
}

/* === CYCLE 31: Visual Polish + Animation + Micro-Interactions === */

/* Staggered feed item entrance */
.feed-stagger-enter {
  opacity: 0;
  transform: translateY(12px);
  animation: feedStaggerIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes feedStaggerIn {
  to { opacity: 1; transform: translateY(0); }
}

/* Online status pulse glow */
@keyframes onlinePulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
  50% { box-shadow: 0 0 6px 2px rgba(76, 175, 80, 0.3); }
}

.online-pulse {
  animation: onlinePulse 2s ease-in-out infinite;
}

/* Online badge gentle pulse */
@keyframes badgePulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.75; }
}

.online-badge-pulse {
  animation: badgePulse 2.5s ease-in-out infinite;
}

/* Skeleton shimmer with AIM palette */
@keyframes skeletonShimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton-shimmer {
  background: linear-gradient(90deg, #e2e8f0 25%, #c7d2fe 50%, #e2e8f0 75%);
  background-size: 200% 100%;
  animation: skeletonShimmer 1.5s ease-in-out infinite;
  border-radius: 4px;
}

.dark .skeleton-shimmer {
  background: linear-gradient(90deg, #1e293b 25%, #312e81 50%, #1e293b 75%);
  background-size: 200% 100%;
}

/* Page content fade in */
@keyframes pageEnter {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.page-enter {
  animation: pageEnter 0.35s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Button premium hover */
.btn-premium {
  transition: transform 0.15s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.15s ease, filter 0.15s ease;
}
.btn-premium:hover {
  transform: translateY(-1px) scale(1.02);
  filter: brightness(1.05);
}
.btn-premium:active {
  transform: translateY(0) scale(0.98);
}

/* Confetti polished */
@keyframes confettiPolished {
  0% {
    transform: translateY(-20px) rotate(0deg) scale(0);
    opacity: 0;
  }
  10% {
    opacity: 1;
    transform: translateY(0) rotate(45deg) scale(1);
  }
  100% {
    transform: translateY(600px) rotate(720deg) scale(0.5);
    opacity: 0;
  }
}

.confetti-polished {
  animation: confettiPolished linear forwards;
}

/* Modal/sheet smooth transitions */
@keyframes modalFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modalSlideUp {
  from { opacity: 0; transform: translateY(16px) scale(0.96); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.modal-backdrop {
  animation: modalFadeIn 0.2s ease-out;
}

.modal-content {
  animation: modalSlideUp 0.25s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Sheet slide up (mobile More menu etc.) */
@keyframes sheetUp {
  from { transform: translateY(100%); opacity: 0.5; }
  to { transform: translateY(0); opacity: 1; }
}

.sheet-enter {
  animation: sheetUp 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}

/* === CYCLE 33: Mobile Experience & PWA === */

/* iOS safe areas */
@supports (padding: env(safe-area-inset-top)) {
  .aim-header {
    padding-top: env(safe-area-inset-top, 0px);
  }
}

/* Standalone mode tweaks (PWA) */
@media (display-mode: standalone) {
  .aim-header {
    padding-top: env(safe-area-inset-top, 0px);
  }

  /* Hide install prompts in standalone */
  .install-prompt { display: none !important; }
}

/* Mobile: compact header */
@media (max-width: 639px) {
  .aim-header {
    padding: 6px 12px;
  }

  /* Prevent content from being hidden behind bottom tab bar */
  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 4px);
  }

  /* Compare page stacking */
  .compare-grid-mobile {
    grid-template-columns: 1fr !important;
  }

  /* Full-width feed items on mobile */
  .feed-item-enter {
    border-radius: 8px;
  }
}

/* Touch action optimization for scrollable areas */
.aim-scrollbar {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Prevent rubber-banding on body when in standalone */
@media (display-mode: standalone) {
  body {
    overscroll-behavior-y: none;
  }
}

/* Bottom sheet backdrop blur on mobile */
@supports (backdrop-filter: blur(4px)) {
  @media (max-width: 639px) {
    .modal-backdrop {
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }
  }
}
